<div class="container mt-5">
    <h1 class="text-center mb-4">Cadastro de Veículos</h1>
    <form id="formVeiculo">
        <div class="row g-3">
            <div class="col-md-6">
                <label for="modelo" class="form-label">Modelo</label>
                <input type="text" class="form-control" id="modelo" placeholder="Ex: Fusca">
            </div>
            <div class="col-md-3">
                <label for="ano" class="form-label">Ano</label>
                <input type="number" class="form-control" id="ano" placeholder="Ex: 1970">
            </div>
            <div class="col-md-3">
                <label for="preco" class="form-label">Preço</label>
                <input type="number" class="form-control" id="preco" placeholder="Ex: 30000">
            </div>

            <div class="col-md-12">
                <label for="descricao" class="form-label">Descrição</label>
                <textarea class="form-control" id="descricao" rows="3" placeholder="Ex: Clássico e icônico."></textarea>
            </div>

            <div class="col-md-6">
                <label for="imagem" class="form-label">Imagens</label>
                <input type="file" class="form-control" id="imagem" multiple>
            </div>
            <div class="col-md-6">
                <label for="cor" class="form-label">Cor</label>
                <input type="text" class="form-control" id="cor" placeholder="Ex: Amarelo">
            </div>

            <div class="col-md-4">
                <label for="quilometragem" class="form-label">Quilometragem</label>
                <input type="number" class="form-control" id="quilometragem" placeholder="Ex: 50000">
            </div>
            <div class="col-md-4">
                <label for="potencia" class="form-label">Potência</label>
                <input type="number" class="form-control" id="potencia" placeholder="Ex: 50">
            </div>
            <div class="col-md-4">
                <label for="motor" class="form-label">Motor</label>
                <input type="text" class="form-control" id="motor" placeholder="Ex: 1.3">
            </div>

            <div class="col-md-4">
                <label for="cambio" class="form-label">Câmbio</label>
                <select class="form-select" id="cambio">
                    <option value="">Selecione</option>
                    <option value="Manual">Manual</option>
                    <option value="Automático">Automático</option>
                </select>
            </div>
            <div class="col-md-4">
                <label for="direcao" class="form-label">Direção</label>
                <select class="form-select" id="direcao">
                    <option value="">Selecione</option>
                    <option value="Hidráulica">Hidráulica</option>
                    <option value="Elétrica">Elétrica</option>
                    <option value="Mecânica">Mecânica</option>
                </select>
            </div>
            <div class="col-md-4">
                <label for="tracao" class="form-label">Tração</label>
                <select class="form-select" id="tracao">
                    <option value="">Selecione</option>
                    <option value="Traseira">Traseira</option>
                    <option value="Dianteira">Dianteira</option>
                    <option value="Integral">Integral</option>
                </select>
            </div>

            <div class="col-md-6">
                <label for="categoriaId" class="form-label">Categoria ID</label>
                <input type="number" class="form-control" id="categoriaId" placeholder="Ex: 2">
            </div>
            <div class="col-md-6">
                <label for="montadoraId" class="form-label">Montadora ID</label>
                <input type="number" class="form-control" id="montadoraId" placeholder="Ex: 3">
            </div>

            <div class="col-md-6">
                <label for="avaliacao" class="form-label">Avaliação</label>
                <input type="number" step="0.1" class="form-control" id="avaliacao" placeholder="Ex: 4.0">
            </div>
            <div class="col-md-6 d-flex align-items-end">
                <div class="form-check me-4">
                    <input type="checkbox" class="form-check-input" id="destaque">
                    <label class="form-check-label" for="destaque">Destaque</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="disponivel" checked>
                    <label class="form-check-label" for="disponivel">Disponível</label>
                </div>
            </div>

            <div class="col-12 text-end">
                <button type="submit" class="btn btn-primary">Cadastrar</button>
            </div>
        </div>
    </form>
</div>

<script>
    $(document).ready(() => {

        $('#formVeiculo').on('submit', function (e) {
            
            e.preventDefault(); // Evita o envio padrão do formulário
            // Pega todos os dados manualmente
            const veiculo = {
                modelo: $('#modelo').val(),
                ano: parseInt($('#ano').val()),
                preco: parseFloat($('#preco').val()),
                descricao: $('#descricao').val(),
                cor: $('#cor').val(),
                quilometragem: parseInt($('#quilometragem').val()),
                potencia: parseInt($('#potencia').val()),
                motor: $('#motor').val(),
                cambio: $('#cambio').val(),
                direcao: $('#direcao').val(),
                tracao: $('#tracao').val(),
                categoriaId: parseInt($('#categoriaId').val()),
                montadoraId: parseInt($('#montadoraId').val()),
                avaliacao: parseFloat($('#avaliacao').val()),
                destaque: $('#destaque').is(':checked'),
                disponivel: $('#disponivel').is(':checked'),
                imagem:[]
                //imagens: $('#imagem')[0].files  // Pega os arquivos
            };

            // Enviando os dados para a API de back-end

            let myHeaders = new Headers();
            myHeaders.append("Content-Type", "application/json");

            let dados = JSON.stringify(veiculo);

            let requestOptions = {
                method: 'POST',
                headers: myHeaders,
                body: dados,
                redirect: 'follow'
            };

            fetch("http://localhost:3000/veiculo", requestOptions)
                .then(response => response.json())
                .then(result => console.log(result))
                .catch(error => console.log('error', error));
        });
    });

</script>